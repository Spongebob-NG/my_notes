好，这个问题非常经典 👍
 你给的代码就是最普通的埃拉托色尼筛法（简称埃氏筛）。我们来分析为什么它的时间复杂度是 **O(n log log n)**。

------

### 1. 代码回顾

```
for (int i = 2; i <= n; i++) 
    if (IsPrime[i]) {
        prime[tot++] = i;
        for (int j = i * 2; j <= n; j += i) 
            IsPrime[j] = false;
    }
```

外层循环枚举 **2 ~ n**，当 `i` 是质数时，内层循环把所有 `i` 的倍数标记掉。

------

### 2. 时间复杂度拆解

关键就在内层循环：

- 当 `i=2` 时，标记了大约 `n/2` 个数。
- 当 `i=3` 时，标记了大约 `n/3` 个数。
- 当 `i=5` 时，标记了大约 `n/5` 个数。
- ……
- 当 `i=p` （质数）时，标记了大约 `n/p` 个数。

所以总的标记次数是：

T(n)=∑p is prime≤nnpT(n) = \sum_{\text{p is prime} \le n} \frac{n}{p}T(n)=p is prime≤n∑pn

------

### 3. 化简

把 nnn 提出来：

T(n)=n∑p≤n1pT(n) = n \sum_{p \le n} \frac{1}{p}T(n)=np≤n∑p1

这里的关键知识是：**质数倒数的和近似于 ln⁡ln⁡n\ln \ln nlnlnn**。
 也就是说：

∑p≤n1p=ln⁡ln⁡n+O(1)\sum_{p \le n} \frac{1}{p} = \ln \ln n + O(1)p≤n∑p1=lnlnn+O(1)

------

### 4. 得出复杂度

于是：

T(n)=n⋅ln⁡ln⁡n+O(n)T(n) = n \cdot \ln \ln n + O(n)T(n)=n⋅lnlnn+O(n)

因此埃氏筛的时间复杂度就是：

O(nlog⁡log⁡n)\boxed{O(n \log \log n)}O(nloglogn)

------

### 5. 为什么是 log log n，不是 log n？

- 如果是所有整数的倒数和：∑k=1n1k≈ln⁡n\sum_{k=1}^n \frac{1}{k} \approx \ln n∑k=1nk1≈lnn。
- 但这里只取质数的倒数，质数比较稀疏，所以增长更慢，只到 ln⁡ln⁡n\ln \ln nlnlnn。
- 这就是比 log 更慢的 **log log** 出现的原因。