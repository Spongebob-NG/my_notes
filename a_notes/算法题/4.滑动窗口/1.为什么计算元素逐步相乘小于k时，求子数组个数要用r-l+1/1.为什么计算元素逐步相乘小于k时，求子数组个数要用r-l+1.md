## 原代码：

```
for (int r = 0; r < nums.size(); r++) { res *= nums[r]; if (res < k) { ans++; } else { while (l <= r) { res /= nums[l]; if (res < k)ans++; l++; } }
```

**这样写的话只统计了r符合条件时最长的数组序列，没有统计它的子序列个数**





*`正确做法：*`

`class Solution {`
`public:`
    `int numSubarrayProductLessThanK(vector<int>& nums, int k) {`
        `if (k <= 1) return 0;  // 特殊情况处理`
        `int l = 0;`
        `int ans = 0;`
        `long long res = 1; // 注意用 long long 防止溢出`
        `for (int r = 0; r < nums.size(); r++) {`
            `res *= nums[r];`
            `while (res >= k) {`
                `res /= nums[l];`
                `l++;`
            `}`
            `ans += (r - l + 1); // 关键点：以 r 为右端点的子数组个数`
        `}`
        `return ans;`
    `}`
`};`



