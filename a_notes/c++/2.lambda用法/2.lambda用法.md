可以啊 👍 ！你这个想法很对，lambda 在 C++ 里用得非常多，尤其是写算法题、STL 排序、函数回调的时候。
 我来给你做一个 **C++ Lambda 全面用法总结**，你就可以整理成笔记。

------

# 📌 C++ Lambda 表达式完整总结

## 1. 基本语法

```
[capture](参数列表) -> 返回类型 { 函数体 };
```

### 组成部分

1. **捕获列表 capture**（`[]`）
   - 指定 lambda 如何访问外部变量
2. **参数列表**（`()`)
   - 和普通函数参数一样，可以省略
3. **返回类型**（`-> type`）
   - 一般省略，编译器能推断
4. **函数体**（`{}`）
   - 真正的逻辑代码

------

## 2. 捕获列表的用法

### 不捕获

```
[]() { return 42; }(); // 返回 42
```

### 捕获外部变量（按值）

```
int x = 10;
auto f = [x]() { return x + 1; };
cout << f(); // 11
```

### 捕获外部变量（按引用）

```
int x = 10;
auto f = [&x]() { x += 5; };
f();
cout << x; // 15
```

### 捕获所有变量

```
int a = 1, b = 2;
// 全部按值
auto f1 = [=]() { return a + b; };
// 全部按引用
auto f2 = [&]() { a += b; };
```

### 混合捕获

```
int a = 1, b = 2;
auto f = [a, &b]() { return a + (++b); };
f();
cout << b; // 3
```

------

## 3. 参数列表

lambda 可以有参数：

```
auto add = [](int a, int b) { return a + b; };
cout << add(3, 4); // 7
```

### 参数用 `auto`（C++14 起）

```
auto mul = [](auto a, auto b) { return a * b; };
cout << mul(3, 4.5); // 13.5
```

------

## 4. 返回类型

通常可以省略，但有时需要写 `->` 指定。

```
auto f = [](int x) -> double {
    return x / 2.0;
};
cout << f(3); // 1.5
```

------

## 5. 作为临时函数调用

```
int result = [](int x, int y) { return x + y; }(5, 7);
cout << result; // 12
```

------

## 6. 存储到变量里

```
auto square = [](int x) { return x * x; };
cout << square(6); // 36
```

------

## 7. 作为参数传递（最常用）

### 排序 sort

```
sort(v.begin(), v.end(),
     [](auto &a, auto &b) { return a.second < b.second; });
```

### for_each 遍历

```
for_each(v.begin(), v.end(),
         [](int x) { cout << x << " "; });
```

### find_if 查找

```
auto it = find_if(v.begin(), v.end(),
                  [](int x) { return x % 2 == 0; });
```

------

## 8. 在 STL 容器中

```
vector<int> v = {1,2,3,4,5};
v.erase(remove_if(v.begin(), v.end(),
                  [](int x) { return x % 2 == 0; }),
        v.end());
// 删除所有偶数
```

------

## 9. 可修改捕获值（mutable）

默认按值捕获的变量在 lambda 内是 **只读**。
 想修改需要加 `mutable`：

```
int x = 10;
auto f = [x]() mutable { x += 5; return x; };
cout << f(); // 15
cout << x;   // 10（外部 x 不变）
```

------

## 10. 泛型 Lambda（C++14+）

```
auto print = [](auto x) { cout << x << endl; };
print(10);       // int
print(3.14);     // double
print("hello");  // const char*
```

------

## 11. 嵌套 / 递归（需要 std::function）

lambda 默认不能直接递归自己（因为没名字），要用 `std::function`：

```
function<int(int)> fact = [&](int n) {
    return n <= 1 ? 1 : n * fact(n - 1);
};
cout << fact(5); // 120
```

------

# 🔑 总结口诀

1. `[]` 捕获外部变量（`&` 引用，`=` 拷贝）
2. `(参数)` 定义参数，可以用 `auto`
3. `{}` 是函数体
4. `->` 可以指定返回类型（一般省略）
5. lambda 可以：
   - 临时调用
   - 存到变量里
   - 传给 sort/find_if/for_each 等算法
   - mutable 修改值捕获变量
   - 配合 `std::function` 做递归