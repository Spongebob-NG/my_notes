å¯ä»¥å•Š ğŸ‘ ï¼ä½ è¿™ä¸ªæƒ³æ³•å¾ˆå¯¹ï¼Œlambda åœ¨ C++ é‡Œç”¨å¾—éå¸¸å¤šï¼Œå°¤å…¶æ˜¯å†™ç®—æ³•é¢˜ã€STL æ’åºã€å‡½æ•°å›è°ƒçš„æ—¶å€™ã€‚
 æˆ‘æ¥ç»™ä½ åšä¸€ä¸ª **C++ Lambda å…¨é¢ç”¨æ³•æ€»ç»“**ï¼Œä½ å°±å¯ä»¥æ•´ç†æˆç¬”è®°ã€‚

------

# ğŸ“Œ C++ Lambda è¡¨è¾¾å¼å®Œæ•´æ€»ç»“

## 1. åŸºæœ¬è¯­æ³•

```
[capture](å‚æ•°åˆ—è¡¨) -> è¿”å›ç±»å‹ { å‡½æ•°ä½“ };
```

### ç»„æˆéƒ¨åˆ†

1. **æ•è·åˆ—è¡¨ capture**ï¼ˆ`[]`ï¼‰
   - æŒ‡å®š lambda å¦‚ä½•è®¿é—®å¤–éƒ¨å˜é‡
2. **å‚æ•°åˆ—è¡¨**ï¼ˆ`()`)
   - å’Œæ™®é€šå‡½æ•°å‚æ•°ä¸€æ ·ï¼Œå¯ä»¥çœç•¥
3. **è¿”å›ç±»å‹**ï¼ˆ`-> type`ï¼‰
   - ä¸€èˆ¬çœç•¥ï¼Œç¼–è¯‘å™¨èƒ½æ¨æ–­
4. **å‡½æ•°ä½“**ï¼ˆ`{}`ï¼‰
   - çœŸæ­£çš„é€»è¾‘ä»£ç 

------

## 2. æ•è·åˆ—è¡¨çš„ç”¨æ³•

### ä¸æ•è·

```
[]() { return 42; }(); // è¿”å› 42
```

### æ•è·å¤–éƒ¨å˜é‡ï¼ˆæŒ‰å€¼ï¼‰

```
int x = 10;
auto f = [x]() { return x + 1; };
cout << f(); // 11
```

### æ•è·å¤–éƒ¨å˜é‡ï¼ˆæŒ‰å¼•ç”¨ï¼‰

```
int x = 10;
auto f = [&x]() { x += 5; };
f();
cout << x; // 15
```

### æ•è·æ‰€æœ‰å˜é‡

```
int a = 1, b = 2;
// å…¨éƒ¨æŒ‰å€¼
auto f1 = [=]() { return a + b; };
// å…¨éƒ¨æŒ‰å¼•ç”¨
auto f2 = [&]() { a += b; };
```

### æ··åˆæ•è·

```
int a = 1, b = 2;
auto f = [a, &b]() { return a + (++b); };
f();
cout << b; // 3
```

------

## 3. å‚æ•°åˆ—è¡¨

lambda å¯ä»¥æœ‰å‚æ•°ï¼š

```
auto add = [](int a, int b) { return a + b; };
cout << add(3, 4); // 7
```

### å‚æ•°ç”¨ `auto`ï¼ˆC++14 èµ·ï¼‰

```
auto mul = [](auto a, auto b) { return a * b; };
cout << mul(3, 4.5); // 13.5
```

------

## 4. è¿”å›ç±»å‹

é€šå¸¸å¯ä»¥çœç•¥ï¼Œä½†æœ‰æ—¶éœ€è¦å†™ `->` æŒ‡å®šã€‚

```
auto f = [](int x) -> double {
    return x / 2.0;
};
cout << f(3); // 1.5
```

------

## 5. ä½œä¸ºä¸´æ—¶å‡½æ•°è°ƒç”¨

```
int result = [](int x, int y) { return x + y; }(5, 7);
cout << result; // 12
```

------

## 6. å­˜å‚¨åˆ°å˜é‡é‡Œ

```
auto square = [](int x) { return x * x; };
cout << square(6); // 36
```

------

## 7. ä½œä¸ºå‚æ•°ä¼ é€’ï¼ˆæœ€å¸¸ç”¨ï¼‰

### æ’åº sort

```
sort(v.begin(), v.end(),
     [](auto &a, auto &b) { return a.second < b.second; });
```

### for_each éå†

```
for_each(v.begin(), v.end(),
         [](int x) { cout << x << " "; });
```

### find_if æŸ¥æ‰¾

```
auto it = find_if(v.begin(), v.end(),
                  [](int x) { return x % 2 == 0; });
```

------

## 8. åœ¨ STL å®¹å™¨ä¸­

```
vector<int> v = {1,2,3,4,5};
v.erase(remove_if(v.begin(), v.end(),
                  [](int x) { return x % 2 == 0; }),
        v.end());
// åˆ é™¤æ‰€æœ‰å¶æ•°
```

------

## 9. å¯ä¿®æ”¹æ•è·å€¼ï¼ˆmutableï¼‰

é»˜è®¤æŒ‰å€¼æ•è·çš„å˜é‡åœ¨ lambda å†…æ˜¯ **åªè¯»**ã€‚
 æƒ³ä¿®æ”¹éœ€è¦åŠ  `mutable`ï¼š

```
int x = 10;
auto f = [x]() mutable { x += 5; return x; };
cout << f(); // 15
cout << x;   // 10ï¼ˆå¤–éƒ¨ x ä¸å˜ï¼‰
```

------

## 10. æ³›å‹ Lambdaï¼ˆC++14+ï¼‰

```
auto print = [](auto x) { cout << x << endl; };
print(10);       // int
print(3.14);     // double
print("hello");  // const char*
```

------

## 11. åµŒå¥— / é€’å½’ï¼ˆéœ€è¦ std::functionï¼‰

lambda é»˜è®¤ä¸èƒ½ç›´æ¥é€’å½’è‡ªå·±ï¼ˆå› ä¸ºæ²¡åå­—ï¼‰ï¼Œè¦ç”¨ `std::function`ï¼š

```
function<int(int)> fact = [&](int n) {
    return n <= 1 ? 1 : n * fact(n - 1);
};
cout << fact(5); // 120
```

------

# ğŸ”‘ æ€»ç»“å£è¯€

1. `[]` æ•è·å¤–éƒ¨å˜é‡ï¼ˆ`&` å¼•ç”¨ï¼Œ`=` æ‹·è´ï¼‰
2. `(å‚æ•°)` å®šä¹‰å‚æ•°ï¼Œå¯ä»¥ç”¨ `auto`
3. `{}` æ˜¯å‡½æ•°ä½“
4. `->` å¯ä»¥æŒ‡å®šè¿”å›ç±»å‹ï¼ˆä¸€èˆ¬çœç•¥ï¼‰
5. lambda å¯ä»¥ï¼š
   - ä¸´æ—¶è°ƒç”¨
   - å­˜åˆ°å˜é‡é‡Œ
   - ä¼ ç»™ sort/find_if/for_each ç­‰ç®—æ³•
   - mutable ä¿®æ”¹å€¼æ•è·å˜é‡
   - é…åˆ `std::function` åšé€’å½’