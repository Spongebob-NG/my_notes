`map` 是 C++ STL 里**非常常用也非常重要**的容器之一，尤其在算法题里经常出现，比如像刚才的那道「下一个更大元素」，很多题目都离不开它。

我会先给你**一个直观的理解**，然后再讲：

1. `map` 是什么
2. 怎么用（常见操作）
3. `unordered_map` 有什么区别
4. 在算法题里是怎么应用的

------

## 🧩 一、`map` 是什么？

`map` 就像是一本**“字典”**或一个**键值对表（key → value）**。

比如你想保存这些数据：

| key（键） | value（值） |
| --------- | ----------- |
| 1         | "one"       |
| 2         | "two"       |
| 3         | "three"     |

在 C++ 里可以这样写：

```
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m;
    m[1] = "one";
    m[2] = "two";
    m[3] = "three";

    cout << m[2]; // 输出 two
}
```

👉 `map` 就像是一个“自动排好序的字典”，**key 唯一且自动从小到大排序**。

------

## ⚙️ 二、常见操作

### 1. 插入

有两种方式：

```
m[5] = "five";              // 最常用，直接插入或修改
m.insert({4, "four"});      // 也可以这样写
```

### 2. 访问

```
cout << m[1];  // 输出 "one"
```

> 如果 key 不存在，`m[key]` 会自动创建一个默认值（比如空字符串或0）。

------

### 3. 查找

```
if (m.count(2)) {  // 判断 key 是否存在
    cout << "存在";
}
```

或者：

```
auto it = m.find(2);
if (it != m.end()) {
    cout << it->first << " -> " << it->second;
}
```

------

### 4. 删除

```
m.erase(2);   // 删除 key = 2 的那一项
```

------

### 5. 遍历

```
for (auto it = m.begin(); it != m.end(); ++it) {
    cout << it->first << " " << it->second << endl;
}
```

或者 C++11 简写：

```
for (auto [key, value] : m) {
    cout << key << " " << value << endl;
}
```

------

## ⚡ 三、`unordered_map` 和 `map` 的区别

| 项目           | map                | unordered_map  |
| -------------- | ------------------ | -------------- |
| 底层结构       | 红黑树（有序）     | 哈希表（无序） |
| 是否排序       | ✅ 自动按 key 排序  | ❌ 无序         |
| 查找复杂度     | O(log n)           | 平均 O(1)      |
| 是否可比较 key | ✅ key 要能比较大小 | ✅ key 要能哈希 |

✅ 所以在算法题中，**`unordered_map` 更常用**，因为它更快。

------

## 💡 四、在算法题中的用途举例

比如我们刚才的题：

```
unordered_map<int, int> next;
stack<int> s;

for (int i = nums2.size() - 1; i >= 0; i--) {
    while (!s.empty() && s.top() <= nums2[i]) s.pop();
    next[nums2[i]] = s.empty() ? -1 : s.top();
    s.push(nums2[i]);
}
```

这里我们是把每个数字 `nums2[i]` 映射到它的下一个更大值：

| 数字 | 下一个更大值 |
| ---- | ------------ |
| 1    | 3            |
| 3    | 4            |
| 4    | -1           |
| 2    | -1           |

这样后面就能用：

```
ans.push_back(next[x]);
```

直接查找结果，不用再在 `nums2` 里找位置了。

------

## 🧠 总结

| 操作      | 语法                                    | 说明           |
| --------- | --------------------------------------- | -------------- |
| 插入/修改 | `m[key] = value`                        | 最常用         |
| 查找      | `m.find(key)` 或 `m.count(key)`         | 判断是否存在   |
| 删除      | `m.erase(key)`                          | 删除键值对     |
| 遍历      | `for (auto [k,v] : m)`                  | 遍历全部       |
| 容器类型  | `map`（有序） / `unordered_map`（无序） | 算法题多用后者 |