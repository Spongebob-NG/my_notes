# 🔹C++ 常见简化代码总结

## 1. **循环遍历**

### 传统写法

```
for (int i = 0; i < v.size(); i++) {
    cout << v[i] << endl;
}
```

### 简化写法（范围 for）

```
for (auto &x : v) {
    cout << x << endl;
}
```

📌 **解释**

- `auto` 会自动推断类型，比如 `int`、`string`、`pair`。
- `&` 表示引用（不拷贝，直接用原对象，效率高）。
- `:` 表示“在容器 v 里依次取元素”。

> 相当于 Python 的 `for x in v:`。

------

## 2. **迭代器写法**

### 传统写法

```
for (vector<int>::iterator it = v.begin(); it != v.end(); it++) {
    cout << *it << endl;
}
```

### 简化写法

```
for (auto it = v.begin(); it != v.end(); it++) {
    cout << *it << endl;
}
```

📌 **解释**
 `auto` 自动推断 `it` 的类型是 `vector::iterator`，所以不用写一大串。

------

## 3. **变量声明**

### 传统写法

```
vector<pair<int, int>> edges;
pair<int, int> p = {1, 2};
```

### 简化写法

```
auto p = make_pair(1, 2);
auto q = {1, 2}; // initializer list
```

📌 **解释**
 `auto` 会自动根据右边的值推断类型。
 比如：

- `auto x = 5;` → `x` 是 `int`
- `auto y = 3.14;` → `y` 是 `double`
- `auto s = "hello";` → `s` 是 `const char*`

------

## 4. **lambda 匿名函数**

### 传统写法（写个比较函数）

```
bool cmp(pair<int,int> a, pair<int,int> b) {
    return a.second < b.second;
}
sort(v.begin(), v.end(), cmp);
```

### 简化写法（lambda）

```
sort(v.begin(), v.end(), [](auto &a, auto &b) {
    return a.second < b.second;
});
```

📌 **解释**

- `[]`：lambda 开始符号（捕获列表，写 `[&]` 表示捕获外部变量引用）。
- `(auto &a, auto &b)`：参数。
- `{ return a.second < b.second; }`：函数体。

------

## 5. **typedef / using**

### 传统写法

```
typedef long long ll;
typedef pair<int,int> pii;
```

### 简化写法

```
using ll = long long;
using pii = pair<int,int>;
```

📌 `using` 更直观，是 C++11 推荐的。

------

## 6. **初始化容器**

### 传统写法

```
vector<int> v;
v.push_back(1);
v.push_back(2);
v.push_back(3);
```

### 简化写法

```
vector<int> v = {1, 2, 3};
```

📌 大括号初始化（C++11 特性），比 push_back 简洁。

------

## 7. **结构体构造函数**

### 传统写法

```
struct Edge {
    int u, v, w;
    Edge(int _u, int _v, int _w) {
        u = _u; v = _v; w = _w;
    }
};
```

### 简化写法（列表初始化）

```
struct Edge {
    int u, v, w;
};
Edge e = {1, 2, 3};
```

------

## 8. **常见函数简化**

- 求最大值最小值

```
int a = 3, b = 5;
int m = min(a, b);
int M = max(a, b);
```

- 交换变量

```
swap(a, b);
```

- 容器排序

```
sort(v.begin(), v.end());
```

- 反转容器

```
reverse(v.begin(), v.end());
```

- 去重

```
sort(v.begin(), v.end());
v.erase(unique(v.begin(), v.end()), v.end());
```

------

## 9. **并查集 / DSU 简化**

### 传统写法

```
int find(int x) {
    if (parent[x] == x) return x;
    return parent[x] = find(parent[x]);
}
```

### 超简写

```
int find(int x) { return parent[x] == x ? x : parent[x] = find(parent[x]); }
```

------

# 🔹总结口诀

1. **auto 万能代替长类型**
2. **范围 for 简化下标循环**
3. **lambda 一行搞定比较函数**
4. **using 代替 typedef**
5. **大括号初始化容器和结构体**