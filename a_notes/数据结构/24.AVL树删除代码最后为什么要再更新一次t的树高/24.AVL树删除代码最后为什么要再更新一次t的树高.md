你这个问题问得非常好 👍

先看逻辑：在 delete_ 里，你在递归删除和做平衡旋转的时候，确实已经更新过高度（比如 LL_rotation、RR_rotation、LR_rotation、RL_rotation 都有 t->h = max(...) + 1;）。
所以你会觉得结尾再来一句

if (t != NULL) {
    t->h = max(geth(t->left), geth(t->right)) + 1;
}


是不是重复的。

🔍 实际上这个更新不是多余的，原因有两个：

没有旋转时，高度仍可能变化

在很多情况下，删除节点后，局部并不需要旋转（比如删除的是叶子节点，或者平衡因子仍然在 -1,0,1 范围内）。

即使不旋转，当前节点的高度也可能变了（例如左子树高度从 2 → 1）。

如果不在最后补充一次 t->h 更新，高度就可能不对。

👉 举例：
删除一个叶子节点时，父节点少了一个孩子，高度一定要减一，但没触发旋转，那就只能靠最后的 t->h = ... 来更新。

递归保证全树更新

删除是递归的，每一层 delete_ 都返回当前子树的根。

即使某层没动到旋转，高度也必须向上逐层刷新，否则上层拿到的 t->h 可能是旧的。

所以这句是“保险措施”，确保递归返回前该子树的高度一定是正确的。

🔑 总结：

如果删除触发了旋转，高度在旋转函数里已经更新 ✅

如果没触发旋转，高度变化只能靠结尾那句更新 ❌（所以必须要保留）。

所以这一句并不是多余，而是 保证所有路径上的节点高度最终都一致 的关键。